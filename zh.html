<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OrderEase éˆ´è²æ——è‰¦ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: sans-serif; background-color: #f1f5f9; padding-bottom: 60px; }
        .header { position: sticky; top: 0; background: #1e293b; color: #fbbf24; padding: 20px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 100; }
        .card { background: white; border-radius: 16px; padding: 20px; margin: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center; border: 1px solid #e2e8f0; }
        .qty-input { width: 70px; height: 50px; font-size: 24px; text-align: center; border: 2px solid #cbd5e1; border-radius: 12px; font-weight: bold; color: #1e293b; }
        .btn-send { background: #10b981; color: white; width: calc(100% - 30px); margin: 15px; padding: 20px; border-radius: 16px; font-size: 24px; font-weight: bold; box-shadow: 0 10px 15px -3px rgba(16, 185, 129, 0.3); }
        .btn-send:active { transform: scale(0.95); background: #059669; }
    </style>
</head>
<body>
    <div class="header">
        <p class="text-xs text-slate-400">ä»Šæ—¥æ¥å–®å–®è™Ÿ</p>
        <h1 id="order-id" class="text-3xl font-black">ç”Ÿæˆä¸­...</h1>
    </div>

    <div class="card">
        <div><h2 class="text-xl font-bold text-slate-800">ç´…ç‡’ç‰›è‚‰éºµ</h2><p class="text-emerald-600 font-bold">$150</p></div>
        <input type="number" class="qty-input" data-name="ç´…ç‡’ç‰›è‚‰éºµ" data-price="150" value="0" min="0">
    </div>

    <div class="card">
        <div><h2 class="text-xl font-bold text-slate-800">æ»·è‚‰é£¯(å¤§)</h2><p class="text-emerald-600 font-bold">$50</p></div>
        <input type="number" class="qty-input" data-name="æ»·è‚‰é£¯(å¤§)" data-price="50" value="0" min="0">
    </div>

    <button onclick="sendOrder()" class="btn-send">ğŸ”¥ é€å‡ºè¨‚å–® (è½éˆ´è²)</button>

    <script>
        // ã€æ ¸å¿ƒç¶²å€ã€‘å°ç…§ image_7657c1.jpg æ ¡æ­£ï¼šs çµå°¾ï¼Œä¸”åŒ…å« ajf1
        const scriptURL = 'https://script.google.com/macros/s/AKfycbys5EEI2YgAPL5YXRbqdedZ_ajf1VWU2ACNN861AqE4n6egJ1-A1a1wZBm9IZyIWp0m/exec';

        // é å‚™éˆ´è²éŸ³è¨Š (é€™æ˜¯ä¸€å€‹æ¸…è„†çš„å®å’šè²)
        const dingSound = new Audio('https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3');

        // ç”Ÿæˆå–®è™Ÿ
        const orderNum = "ORDER-" + Math.floor(Math.random() * 9000 + 1000);
        document.getElementById('order-id').innerText = orderNum;

        async function sendOrder() {
            const items = [];
            let total = 0;
            document.querySelectorAll('.qty-input').forEach(input => {
                const qty = parseInt(input.value);
                if(qty > 0) {
                    items.push(input.getAttribute('data-name') + " x" + qty);
                    total += qty * parseInt(input.getAttribute('data-price'));
                }
            });

            if(items.length === 0) return alert("å®¢å®˜ï¼Œæ‚¨é‚„æ²’é»é¤å‘¢ï¼");

            const btn = document.querySelector('.btn-send');
            btn.innerText = "âš¡ æ­£åœ¨å‚³é€...";
            btn.disabled = true;

            try {
                // ç™¼é€åˆ° Apps Script
                await fetch(scriptURL, {
                    method: 'POST',
                    mode: 'no-cors',
                    body: JSON.stringify({ orderId: orderNum, items: items.join('\n'), total: total })
                });

                // ã€éˆ´è²éŸ¿èµ·ã€‘å‚³é€æˆåŠŸå³æ’­æ”¾
                dingSound.play();

                alert("âœ… æˆåŠŸï¼è½åˆ°éˆ´è²äº†å—ï¼Ÿæ–°è¨‚å–®å·²æ’åœ¨æœ€ä¸Šæ–¹ã€‚");
                location.reload(); 
            } catch (e) {
                alert("âŒ æ…˜äº†ï¼Œç¶²è·¯æ–·äº†ï¼");
                btn.disabled = false;
                btn.innerText = "å†è©¦ä¸€æ¬¡";
            }
        }
    </script>
</body>
</html>